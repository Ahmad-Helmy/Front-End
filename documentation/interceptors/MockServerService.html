<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>mayestro documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">mayestro documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interceptor">
                   <div class="content-data">








<ol class="breadcrumb">
  <li>Interceptors</li>
  <li>MockServerService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/shared/mock-server/mock-server.service.ts</code>
        </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#albums">albums</a>
                            </li>
                            <li>
                                <a href="#hashId">hashId</a>
                            </li>
                            <li>
                                <a href="#mytracks">mytracks</a>
                            </li>
                            <li>
                                <a href="#playlists">playlists</a>
                            </li>
                            <li>
                                <a href="#tracks">tracks</a>
                            </li>
                            <li>
                                <a href="#users">users</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#intercept">intercept</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor()</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/app/shared/mock-server/mock-server.service.ts:27</a></div>
                            </td>
                        </tr>

            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="intercept"></a>
                    <span class="name">
                        <b>
                            intercept
                        </b>
                        <a href="#intercept"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>intercept(request: HttpRequest<any>, next: <a href="https://angular.io/api/common/http/HttpHandler" target="_blank">HttpHandler</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="140"
                            class="link-to-prism">src/app/shared/mock-server/mock-server.service.ts:140</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>request</td>
                                    <td>
                                            <code>HttpRequest&lt;any&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>next</td>
                                    <td>
                                                <code><a href="https://angular.io/api/common/http/HttpHandler" target="_blank" >HttpHandler</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;any&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="albums"></a>
                        <span class="name">
                            <b>
                            albums</b>
                            <a href="#albums"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="24" class="link-to-prism">src/app/shared/mock-server/mock-server.service.ts:24</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="hashId"></a>
                        <span class="name">
                            <b>
                            hashId</b>
                            <a href="#hashId"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>[]</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>[]</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="23" class="link-to-prism">src/app/shared/mock-server/mock-server.service.ts:23</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="mytracks"></a>
                        <span class="name">
                            <b>
                            mytracks</b>
                            <a href="#mytracks"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/app/shared/mock-server/mock-server.service.ts:27</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="playlists"></a>
                        <span class="name">
                            <b>
                            playlists</b>
                            <a href="#playlists"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="26" class="link-to-prism">src/app/shared/mock-server/mock-server.service.ts:26</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="tracks"></a>
                        <span class="name">
                            <b>
                            tracks</b>
                            <a href="#tracks"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="25" class="link-to-prism">src/app/shared/mock-server/mock-server.service.ts:25</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="users"></a>
                        <span class="name">
                            <b>
                            users</b>
                            <a href="#users"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="22" class="link-to-prism">src/app/shared/mock-server/mock-server.service.ts:22</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &quot;@angular/core&quot;;
import { JwtHelper } from &quot;angular2-jwt&quot;;
import {
  HttpRequest,
  HttpResponse,
  HttpHandler,
  HttpEvent,
  HttpInterceptor,
  HTTP_INTERCEPTORS
} from &quot;@angular/common/http&quot;;
import { Observable, of, throwError, from } from &quot;rxjs&quot;;
import {
  delay,
  mergeMap,
  materialize,
  dematerialize,
  map
} from &quot;rxjs/operators&quot;;

@Injectable()
export class MockServerService implements HttpInterceptor {
  users: any;
  hashId &#x3D; [];
  albums: any;
  tracks: any;
  playlists: any;
  mytracks: any;
  constructor() {
    this.users &#x3D; [
      {
        _id: &quot;1234567890&quot;,
        email: &quot;ahmed@gmail.com&quot;,
        password: &quot;12345678&quot;,
        name: &quot;Ahmed Helmy&quot;,
        gender: &quot;male&quot;,
        birthDate:
          &quot;Wed Feb 01 1999 00:00:00 GMT+0200 (Eastern European Standard Time)&quot;,
        image:
          &quot;https://i.scdn.co/image/ab67616d0000b2738b989426c336c1d1cf89502a&quot;,
        country: &quot;Egypt&quot;
      }
    ];
    this.playlists &#x3D; [
      {
        totalTracks: 2,
        name: &quot;top 20&quot;,
        _id: &quot;1234&quot;,
        releaseDate:
          &quot;Wed May 01 2020 00:00:00 GMT+0200 (Eastern European Standard Time)&quot;,
        image: {
          url:
            &quot;https://i4.aroq.com/3/2016-12-15-10-59-top20toplist_cropped_90.jpg&quot;
        },
        owner: [
          {
            name: &quot;me&quot;
          }
        ]
      }
    ];
    this.albums &#x3D; [
      {
        totalTracks: 2,
        name: &quot;sahran&quot;,
        _id: &quot;1234&quot;,
        releaseDate:
          &quot;Wed May 01 2020 00:00:00 GMT+0200 (Eastern European Standard Time)&quot;,
        image: {
          url:
            &quot;https://i.scdn.co/image/ab67616d0000b2738b989426c336c1d1cf89502a&quot;
        },
        artist: [
          {
            name: &quot;amrdiab&quot;
          }
        ]
      }
    ];
    this.tracks &#x3D; [
      {
        name: &quot;amarain&quot;,
        trackNumber: 1,
        id: 1,
        duration: 2,
        artists: [
          {
            name: &quot;amrdiab&quot;
          }
        ]
      },
      {
        name: &quot;sahran&quot;,
        trackNumber: 2,
        id: 2,
        duration: 2,
        artists: [
          {
            name: &quot;amrdiab&quot;
          }
        ]
      }
    ];

    this.mytracks &#x3D; [
      {
        artists: [
          {
            id: &quot;19gmxCK2V3jLMi5fDYyKtS&quot;,
            name: &quot;Willamette Stone&quot;
          }
        ],
        url: &quot;https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3&quot;,
        image:
          &quot;https://i.scdn.co/image/ab67616d00001e0219ab0403aa0de6ee32b101ff&quot;,
        id: &quot;3JOF9NzQVkUXtCcJbEQuAb&quot;,
        name: &quot;Heart Like Yours&quot;,
        previewUrl:
          &quot;https://p.scdn.co/mp3-preview/b5fbda2874c09a249989b9570381537e8dee59c1?cid&#x3D;162b7dc01f3a4a2ca32ed3cec83d1e02&quot;
      },
      {
        artists: [
          {
            id: &quot;19gmxCK2V3jLMi5fDYyKtS&quot;,
            name: &quot;Willamette Stone&quot;
          }
        ],
        url: &quot;https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3&quot;,
        image:
          &quot;https://i.scdn.co/image/ab67616d00001e0219ab0403aa0de6ee32b101ff&quot;,
        id: &quot;3cdyjNKFN0tWP9Z8icNvcf&quot;,
        name: &quot;Never Coming Down&quot;,
        previewUrl:
          &quot;https://p.scdn.co/mp3-preview/c8628766a22440f0e355d7221caf7a1f0cbe79fb?cid&#x3D;162b7dc01f3a4a2ca32ed3cec83d1e02&quot;
      },
      {
        id: &quot;4qrimQUz8KFC8W6WrDiDnc&quot;
      }
    ];
  }
  intercept(request: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;any&gt; {
    let users &#x3D; this.users;
    let hashId &#x3D; this.hashId;
    let albums &#x3D; this.albums;
    let tracks &#x3D; this.tracks;
    let playlists &#x3D; this.playlists;
    let mytracks &#x3D; this.mytracks;

    const { url, method, headers, body } &#x3D; request;

    console.log(url);
    // wrap in delayed observable to simulate server api call
    return of(null)
      .pipe(mergeMap(handleRoute))
      .pipe(materialize()) // call materialize and dematerialize to ensure delay even if an error is thrown (https://github.com/Reactive-Extensions/RxJS/issues/648)
      .pipe(delay(500))
      .pipe(dematerialize());

    function handleRoute() {
      switch (true) {
        case url.endsWith(&quot;/user/login&quot;) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;POST&quot;:
          return login();
        case url.endsWith(&quot;/user/signup&quot;) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;POST&quot;:
          return signup();
        case url.endsWith(&quot;/home&quot;) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;GET&quot;:
          return home();
        case url.match(/\/home\/\S+$/) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;GET&quot;:
          return seeAll();
        case url.match(
          /\/user\/mailExist\/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/
        ) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;GET&quot;:
          return checkEmail();
        case url.match(
          /\/user\/forgetPassword\/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/
        ) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;GET&quot;:
          return forgetPassword();
        case url.match(/\/albums\/\S+$/) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;GET&quot;:
          return viewalbum();
        case url.match(/\/albums\/\S+\/tracks$/) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;GET&quot;:
          return viewtracks();
        case url.match(/\/playlist\/\S+$/) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;GET&quot;:
          return viewplaylist();
        case url.match(/\/playlist\/\S+\/tracks$/) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;GET&quot;:
          return viewtracks();
        case url.endsWith(&quot;/user/profile&quot;) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;GET&quot;:
          return viewuser();
        case url.endsWith(&quot;/user/editprofile&quot;) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;PUT&quot;:
          return edituser();
        case url.match(/\/user\/resetPassword\?id&#x3D;\S+$/) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;POST&quot;:
          return resetPassword();
        case url.endsWith(&quot;/user/changePassword&quot;) &amp;&amp; method &#x3D;&#x3D; &quot;POST&quot;:
          return changePassword();
        case url.match(/\/playlist\/\S+\/tracks$/) &amp;&amp; method &#x3D;&#x3D;&#x3D; &quot;GET&quot;:
          return track();
        //     case url.endsWith(&#x27;/users/authenticate&#x27;) &amp;&amp; method &#x3D;&#x3D;&#x3D; &#x27;POST&#x27;:
        //         return authenticate();
        //     case url.endsWith(&#x27;/users&#x27;) &amp;&amp; method &#x3D;&#x3D;&#x3D; &#x27;GET&#x27;:
        //         return getUsers();
        //     case url.match(/\/users\/\d+$/) &amp;&amp; method &#x3D;&#x3D;&#x3D; &#x27;GET&#x27;:
        //         return getUserById();
        //     case url.match(/\/users\/\d+$/) &amp;&amp; method &#x3D;&#x3D;&#x3D; &#x27;DELETE&#x27;:
        //         return deleteUser();
        //     default:
        //         // pass through any requests not handled above
        // return next.handle(request);
      }
    }

    function viewplaylist() {
      console.log(&quot;album&quot;);
      const id &#x3D; idFromUrl();
      const playlist &#x3D; playlists.find(al &#x3D;&gt; al._id &#x3D;&#x3D;&#x3D; id);
      if (playlist) return ok(playlist);
      return error(&quot;no album found with this id&quot;);
    }

    function viewalbum() {
      console.log(&quot;her&quot;);
      const id &#x3D; idFromUrl();
      const album &#x3D; albums.find(al &#x3D;&gt; al._id &#x3D;&#x3D;&#x3D; id);
      if (album) return ok(album);
      return error(&quot;no album found with this id&quot;);
    }
    function edituser() {
      //if(!isLoggedIn()) return unauthorized();

      return ok({
        token:
          &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkFobWVkIEhlbG15IiwiaWF0IjoxNTE2MjM5MDIyfQ.1IywQey38ixVhRWY9cXsk8xzD7Z-aN9P-jQUsHwGhBE&quot;
      });
    }
    function viewtracks() {
      const id &#x3D; idFromUrl();
      const album &#x3D; albums.find(al &#x3D;&gt; al._id &#x3D;&#x3D;&#x3D; id);
      if (album) return ok(tracks);
      return error(&quot;no album found with this id&quot;);
    }
    function viewuser() {
      //if(!isLoggedIn()) return unauthorized();
      return ok(users[0]);
    }

    function login() {
      const { email, password } &#x3D; body;
      let user &#x3D; users.find(
        x &#x3D;&gt; (x.email &#x3D;&#x3D;&#x3D; email || x.name &#x3D;&#x3D;&#x3D; email) &amp;&amp; x.password &#x3D;&#x3D;&#x3D; password
      );
      if (!user) return error(&quot;Incorrect username or password.&quot;);
      return ok({
        token:
          &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkFobWVkIEhlbG15IiwiaWF0IjoxNTE2MjM5MDIyfQ.1IywQey38ixVhRWY9cXsk8xzD7Z-aN9P-jQUsHwGhBE&quot;
      });
    }
    function signup() {
      console.log(body);
      let { email, password, name, gender, birthDate } &#x3D; body;
      switch (gender) {
        case 0:
          gender &#x3D; &quot;Mail&quot;;
          break;
        case 1:
          gender &#x3D; &quot;Femail&quot;;
          break;

        default:
          break;
      }
      if (email &amp;&amp; password &amp;&amp; name &amp;&amp; gender &amp;&amp; birthDate) {
        let user &#x3D; users.find(x &#x3D;&gt; x.email &#x3D;&#x3D;&#x3D; email);
        if (user) return error(&quot;We&#x27;re sorry, that email is taken.&quot;);
        const _id &#x3D; Math.floor(Math.random() * 100000);
        user &#x3D; {
          _id,
          email,
          password,
          name,
          gender,
          birthDate
        };
        users.push(user);
        return ok({
          token:
            &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkFobWVkIEhlbG15IiwiaWF0IjoxNTE2MjM5MDIyfQ.1IywQey38ixVhRWY9cXsk8xzD7Z-aN9P-jQUsHwGhBE&quot;
        });
      }
    }
    function checkEmail() {
      const urlSplit &#x3D; url.split(&quot;/&quot;);
      const email &#x3D; urlSplit[urlSplit.length - 1];
      const user &#x3D; users.find(user &#x3D;&gt; user.email &#x3D;&#x3D;&#x3D; email);
      return user ? error(&quot;user Exist&quot;) : ok();
    }
    function forgetPassword() {
      const email &#x3D; idFromUrl();
      let user &#x3D; users.find(user &#x3D;&gt; user.email &#x3D;&#x3D;&#x3D; email);
      if (user) {
        const hash &#x3D; String(Math.floor(Math.random() * 100000000000));
        const _id &#x3D; user._id;
        hashId.push({ hash, _id });
        console.log(hashId);
        return ok({ hash });
      }
      return error(&quot;no user&quot;);
    }
    function resetPassword() {
      const { newPassword, confirmedPassword } &#x3D; body;
      if (newPassword !&#x3D;&#x3D; confirmedPassword)
        return error(&quot;passwords not match&quot;);
      const hash &#x3D; url.split(&quot;&#x3D;&quot;)[1];
      console.log(hashId, hash);
      const checkHashExists &#x3D; hashId.find(h &#x3D;&gt; h.hash &#x3D;&#x3D; hash);
      if (checkHashExists) {
        const user &#x3D; users.find(user &#x3D;&gt; user._id &#x3D;&#x3D;&#x3D; checkHashExists._id);
        user.password &#x3D; newPassword;
        console.log(users);
        return ok({
          token:
            &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkFobWVkIEhlbG15IiwiaWF0IjoxNTE2MjM5MDIyfQ.1IywQey38ixVhRWY9cXsk8xzD7Z-aN9P-jQUsHwGhBE&quot;
        });
      }
      return error(&quot;no hash key matchs&quot;);
    }
    function changePassword() {
      if (!isLoggedIn()) return unauthorized();
      const { oldPassword, newPassword, confirmedPassword } &#x3D; body;
      const token &#x3D; dataFromToken();
      const user &#x3D; users.find(user &#x3D;&gt; user._id &#x3D;&#x3D;&#x3D; token._id);
      if (user.password !&#x3D;&#x3D; oldPassword)
        return error(&quot;enter correct old password&quot;);
      if (newPassword &#x3D;&#x3D;&#x3D; oldPassword)
        return error(&quot;please enter another password&quot;);
      user.password &#x3D; newPassword;
      return ok();
    }
    function home() {
      const categories &#x3D; {
        Home: [
          {
            playlists: [
              {
                type: &quot;playlist&quot;,
                description: &quot;Some Comfort Tracks to relax&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnd&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67706f00000002a86f06fb337166fc5047efee&quot;,
                name: &quot;Comfort Zone&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;Relax your Mind&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDne&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e029df54b112dfa5da467239db0&quot;,
                name: &quot;Relaxtion&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;get a Peacful Mind with our playlist&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnf&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d0000b273c7cd431638fcd90523df85c3&quot;,
                name: &quot;Peacful Mind&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;Take A Rest&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnf&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e02ba5db46f4b838ef6027e6f96&quot;,
                name: &quot;Rest&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;Make a good and Sweet Moments&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDng&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e02ba5db46f4b838ef6027e6f96&quot;,
                name: &quot;Sweet Moments&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;Good hours to spend with music&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnh&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e020a8faf02e33a80f13070b58a&quot;,
                name: &quot;Sweet Moments&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;Time to chill out with perfect songs&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDni&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e020a8faf02e33a80f13070b58a&quot;,
                name: &quot;chill songs&quot;
              }
            ],
            name: &quot;Chill&quot;
          },
          {
            playlists: [
              {
                type: &quot;playlist&quot;,
                description: &quot;New Songs Exclusive Happy and chill&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDma&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0225ba01b18a41bcc562209e42&quot;,
                name: &quot;Moments&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;get yourself some energy&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnj&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0284c0ae5b34bc3fe4238c3bdd&quot;,
                name: &quot;Energy&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;Time to chill out with perfect songs&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDni&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e020a8faf02e33a80f13070b58a&quot;,
                name: &quot;chill songs&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;May be Happy now&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDmf&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0205559264ebef3889709826cf&quot;,
                name: &quot;HAPPY PERSON&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;do some excerise&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDme&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0241e9614560815b11c1ca543d&quot;,
                name: &quot;Sport Music&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;New Songs Mood Adjust &quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDmb&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0225ba01b18a41bcc562209e42&quot;,
                name: &quot;Keep Up&quot;
              },
              {
                type: &quot;playlist&quot;,
                description:
                  &quot;playlist from the including all songs in if i stay movie&quot;,
                id: &quot;4qrimQUz8KFC8W6WrDiDnc&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d0000b273c7cd431638fcd90523df85c3&quot;,
                name: &quot;If i stay(soundtrack)&quot;
              }
            ],
            name: &quot;WorkOut&quot;
          },
          {
            playlists: [
              {
                type: &quot;playlist&quot;,
                description: &quot;New Songs Mood Adjust &quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDmb&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0225ba01b18a41bcc562209e42&quot;,
                name: &quot;Keep Up&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;do some excerise&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDme&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0241e9614560815b11c1ca543d&quot;,
                name: &quot;Sport Music&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;get yourself some energy&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnj&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0284c0ae5b34bc3fe4238c3bdd&quot;,
                name: &quot;Energy&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;Some Comfort Tracks to relax&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnd&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67706f00000002a86f06fb337166fc5047efee&quot;,
                name: &quot;Comfort Zone&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;playlist Exclusive Amr Diab&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnc&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d0000b273c7cd431638fcd90523df85c3&quot;,
                name: &quot;New Songs Amr Diab&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;Relax your Mind&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDne&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e029df54b112dfa5da467239db0&quot;,
                name: &quot;Relaxtion&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;get yourself some energy&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnh&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e023b52eca47232bedfbb5e9443&quot;,
                name: &quot;Energy&quot;
              }
            ],
            name: &quot;Happy&quot;
          },
          {
            playlists: [
              {
                type: &quot;playlist&quot;,
                description: &quot;get a Peacful Mind with our playlist&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnf&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d0000b273c7cd431638fcd90523df85c3&quot;,
                name: &quot;Peacful Mind&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;May be Happy now&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDmf&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0205559264ebef3889709826cf&quot;,
                name: &quot;HAPPY PERSON&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;New Songs Exclusive Happy and chill&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDma&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0225ba01b18a41bcc562209e42&quot;,
                name: &quot;Moments&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;do some excerise&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDme&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0241e9614560815b11c1ca543d&quot;,
                name: &quot;Sport Music&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;Take A Rest&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnf&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e02ba5db46f4b838ef6027e6f96&quot;,
                name: &quot;Rest&quot;
              },
              {
                type: &quot;playlist&quot;,
                description: &quot;get yourself some energy&quot;,
                id: &quot;4qrimFUz8KFC8W6WrDiDnh&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e023b52eca47232bedfbb5e9443&quot;,
                name: &quot;Energy&quot;
              }
            ],
            description: &quot;Most popular around world&quot;,
            name: &quot;Most Popular Playlists&quot;
          },
          {
            albums: [
              {
                artists: [
                  {
                    id: &quot;7H55rcKCfwqkyDFH9wpKM6&quot;,
                    name: &quot;Christina Perri&quot;
                  }
                ],
                type: &quot;album&quot;,
                id: &quot;3xl0OvcSlc9Mwe5ToaFtD3&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e02d32c61683be0aed19bafcf99&quot;,
                name: &quot;songs for carmella: lullabies &amp; sing-a-longs&quot;
              },
              {
                artists: [
                  {
                    id: &quot;04gDigrS5kc9YWfZHwBETP&quot;,
                    name: &quot;Marron 5&quot;
                  }
                ],
                type: &quot;album&quot;,
                id: &quot;75iQSBSaztFIAun9qLLCnb&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d00001e0234ce9a9dde9c057225509276&quot;,
                name: &quot;Girls Like You (feat. Cardi B)&quot;
              }
            ],
            description: &quot;Newest Albums Released with your artits&quot;,
            name: &quot;Released Albums&quot;
          },
          {
            artists: [
              {
                type: &quot;artist&quot;,
                id: &quot;3xl0OvcSlc9Mwe5ToaFtD3&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d0000b273abf13a20e745572fc39f939b&quot;,
                name: &quot;Amr Diab&quot;
              },
              {
                type: &quot;artist&quot;,
                id: &quot;75iQSBSaztFIAun9qLLCnb&quot;,
                image:
                  &quot;https://i.scdn.co/image/ab67616d0000b2732b737b0411be58583293e17e&quot;,
                name: &quot;Tamer Hosni&quot;
              }
            ],
            description: &quot;Artists&quot;,
            name: &quot;popular Artists&quot;
          }
        ]
      };
      return ok(categories);
    }

    function seeAll() {
      const category &#x3D; {
        category: {
          playlists: [
            {
              description: &quot;Some Comfort Tracks to relax&quot;,
              id: &quot;4qrimFUz8KFC8W6WrDiDnd&quot;,
              image:
                &quot;https://i.scdn.co/image/ab67706f00000002a86f06fb337166fc5047efee&quot;,
              name: &quot;Comfort Zone&quot;
            },
            {
              description: &quot;Relax your Mind&quot;,
              id: &quot;4qrimFUz8KFC8W6WrDiDne&quot;,
              image:
                &quot;https://i.scdn.co/image/ab67616d00001e029df54b112dfa5da467239db0&quot;,
              name: &quot;Relaxtion&quot;
            },
            {
              description: &quot;get a Peacful Mind with our playlist&quot;,
              id: &quot;4qrimFUz8KFC8W6WrDiDnf&quot;,
              image:
                &quot;https://i.scdn.co/image/ab67616d0000b273c7cd431638fcd90523df85c3&quot;,
              name: &quot;Peacful Mind&quot;
            },
            {
              description: &quot;Take A Rest&quot;,
              id: &quot;4qrimFUz8KFC8W6WrDiDnf&quot;,
              image:
                &quot;https://i.scdn.co/image/ab67616d00001e02ba5db46f4b838ef6027e6f96&quot;,
              name: &quot;Rest&quot;
            },
            {
              description: &quot;Make a good and Sweet Moments&quot;,
              id: &quot;4qrimFUz8KFC8W6WrDiDng&quot;,
              image:
                &quot;https://i.scdn.co/image/ab67616d00001e02ba5db46f4b838ef6027e6f96&quot;,
              name: &quot;Sweet Moments&quot;
            },
            {
              description: &quot;Good hours to spend with music&quot;,
              id: &quot;4qrimFUz8KFC8W6WrDiDnh&quot;,
              image:
                &quot;https://i.scdn.co/image/ab67616d00001e020a8faf02e33a80f13070b58a&quot;,
              name: &quot;Sweet Moments&quot;
            },
            {
              description: &quot;Time to chill out with perfect songs&quot;,
              id: &quot;4qrimFUz8KFC8W6WrDiDni&quot;,
              image:
                &quot;https://i.scdn.co/image/ab67616d00001e020a8faf02e33a80f13070b58a&quot;,
              name: &quot;chill songs&quot;
            },
            {
              description: &quot;get yourself some energy&quot;,
              id: &quot;4qrimFUz8KFC8W6WrDiDnj&quot;,
              image:
                &quot;https://i.scdn.co/image/ab67616d00001e0284c0ae5b34bc3fe4238c3bdd&quot;,
              name: &quot;Energy&quot;
            },
            {
              description: &quot;get yourself some energy&quot;,
              id: &quot;4qrimFUz8KFC8W6WrDiDnh&quot;,
              image:
                &quot;https://i.scdn.co/image/ab67616d00001e023b52eca47232bedfbb5e9443&quot;,
              name: &quot;Energy&quot;
            },
            {
              description: &quot;New Songs Exclusive Happy and chill&quot;,
              id: &quot;4qrimFUz8KFC8W6WrDiDma&quot;,
              image:
                &quot;https://i.scdn.co/image/ab67616d00001e0225ba01b18a41bcc562209e42&quot;,
              name: &quot;Moments&quot;
            }
          ],

          name: &quot;Chill&quot;
        }
      };
      return ok(category);
    }
    // helper functions

    function track() {
      const id &#x3D; url.split(&quot;/&quot;)[url.length - 2];
      const track &#x3D; mytracks.find(tr &#x3D;&gt; tr._id &#x3D;&#x3D;&#x3D; id);
      if (track) return ok(track);
      return error(&quot;no track found with this id&quot;);
    }

    function ok(body?) {
      console.log(&quot;successMock&quot;);
      return of(new HttpResponse({ status: 200, body }));
    }

    function unauthorized() {
      return throwError({ status: 401, error: { message: &quot;Unauthorised&quot; } });
    }

    function dataFromToken() {
      const jwt &#x3D; new JwtHelper();
      return jwt.decodeToken(headers.get(&quot;token&quot;));
    }

    function error(message) {
      console.log(&quot;errMock&quot;);
      return throwError({ error: { message } });
    }

    function isLoggedIn() {
      return (
        headers.get(&quot;token&quot;) &#x3D;&#x3D;&#x3D;
        &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkFobWVkIEhlbG15IiwiaWF0IjoxNTE2MjM5MDIyfQ.1IywQey38ixVhRWY9cXsk8xzD7Z-aN9P-jQUsHwGhBE&quot;
      );
    }

    function idFromUrl() {
      const urlParts &#x3D; url.split(&quot;/&quot;);
      return urlParts[urlParts.length - 1];
    }
  }
}

export const fakeBackendProvider &#x3D; {
  // use fake backend in place of Http service for backend-less development
  provide: HTTP_INTERCEPTORS,
  useClass: MockServerService,
  multi: true
};</code></pre>
    </div>
</div>






                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interceptor';
            var COMPODOC_CURRENT_PAGE_URL = 'MockServerService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
